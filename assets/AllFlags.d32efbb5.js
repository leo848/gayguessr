import{F as q,L as I,v as C,x as N,y as D,_ as M,r as w,o as u,c as v,w as l,V as R,a as n,h as A,z as H,A as F,n as k,B as V,C as j,D as O,E as P,e as g,H as c,I as L,J as _,p as y,j as p,t as m,K as z,b as S,f as B,g as E,M as U,N as W,O as G,P as J,d as K,Q}from"./index.15733fe7.js";function Y(e,s){if(e.length===0)return s.length;if(s.length===0)return e.length;e.length>s.length&&([e,s]=[s,e]);let t=0,o=0,i=0;const r=Array(e.length+1);for(t=0;t<=e.length;t++)r[t]=t;let d;for(t=1;t<=s.length;t++)for(i=t,o=1;o<=e.length;o++)d=r[o-1],r[o-1]=i,i=s.charAt(t-1)===e.charAt(o-1)?d:Math.min(d+1,Math.min(i+1,r[o]+1));return i}function T(e){return[...new Set(e)]}const x={name:"AllFlags",components:{Flag:q,LabelInfo:I},data:()=>({flags:Object.keys(C),search:"",error:null,reverse:!1,lastChosenAlgorithm:0,sortAlgorithms:[{name:"Alphabetically",exec:e=>e.sort(),icon:"mdi-alphabetical-variant"},{name:"Random",exec:e=>N(e,D(new Date().toUTCString())),icon:"mdi-dice-5",hideReverse:!0},{name:"Length of name",icon:"mdi-arrow-split-vertical",exec:e=>e.sort((s,t)=>s.length-t.length)},{name:"Amount of stripes",icon:"mdi-texture-box",exec:e=>e.sort((s,t)=>C[s].colors().length-C[t].colors().length)},{name:"Amount of colors",icon:"mdi-palette",exec:e=>e.sort((s,t)=>T(C[s].colors()).length-T(C[t].colors()).length)}]}),computed:{improvedSearch(){const{search:e,filteredFlags:s}=this;if(s.length===0)return e;let[t,o]=[!0,!0],i=e.toLowerCase();for(;t||o;){for(const f of s)f.startsWith(i)&&(t=!1),f.endsWith(i)&&(o=!1);if(!t&&!o)return i;let r=null;if(t)for(const f of s){const a=f.search(i);let h=f.charAt(a-1);if(r&&h!=r){t=!1;break}r=h}t&&(i=r+i);let d=null;if(o)for(const f of s){const a=f.search(i)+i.length;let h=f.charAt(a);if(d&&h!==d){o=!1;break}d=h}o&&(i+=d)}return i},suggestion(){const{search:e,flags:s}=this,t=s.map(o=>({name:o,lev:Y(o.toLowerCase(),e.toLowerCase())/e.length})).sort((o,i)=>o.lev-i.lev);return t[0].lev>.75?null:t[0].name},filteredFlags(){return this.flags.filter(this.test)}},created(){this.flags=this.flags.sort(),requestAnimationFrame(()=>{this.search=this.$route.query.query||""})},watch:{search(){this.$router.replace({query:{query:this.search}})}},methods:{test(e){return e.toLowerCase().includes(this.search.toLowerCase())},highlight(e,s){return s?e.replace(s.toLowerCase(),t=>`<span class="text-success">${t}</span>`):e}}},X=p("span",null,"Reload flags",-1),Z={key:0,class:"text-h5"},$={key:0},ee={key:1,class:"text-disabled"},se={key:1,class:"text-h5"},te=p("br",null,null,-1),le={key:0},ae=p("p",{class:"text-h3 mb-4"},"No flags found",-1),re={class:"text-h5"};function ne(e,s,t,o,i,r){const d=w("Flag"),f=w("LabelInfo");return u(),v(R,null,{default:l(()=>[n(E,null,{default:l(()=>[n(A,{cols:"8"},{default:l(()=>[n(H,{class:"mt-4",modelValue:e.search,"onUpdate:modelValue":s[0]||(s[0]=a=>e.search=a),onBlur:s[1]||(s[1]=a=>e.search=r.improvedSearch),error:e.error!==null,"error-messages":e.error||void 0,"append-icon":"mdi-magnify",label:"Search...",clearable:"","single-line":"","hide-details":""},null,8,["modelValue","error","error-messages"])]),_:1}),n(A,{cols:"4"},{default:l(()=>[n(F,{bottom:""},{activator:l(({props:a})=>[n(k,V({icon:"mdi-refresh",class:"mt-4 ml-4"},a,{onClick:s[2]||(s[2]=h=>e.flags=e.flags.slice())}),null,16)]),default:l(()=>[X]),_:1}),r.filteredFlags.length>1?(u(),v(j,{key:0},{activator:l(({props:a})=>{var h,b;return[n(k,V({icon:(b=(h=e.lastChosenAlgorithm)==null?void 0:h.icon)!=null?b:"mdi-sort-variant",class:"mt-4 ml-4"},a),null,16,["icon"])]}),default:l(()=>[n(O,null,{default:l(()=>[n(P,null,{default:l(()=>[g("Sort by")]),_:1}),(u(!0),c(_,null,L(e.sortAlgorithms,a=>(u(),v(U,{key:a.name,variant:a.name===e.lastChosenAlgorithm.name?"tonal":void 0,onClick:h=>{e.flags=a.exec(e.flags),e.lastChosenAlgorithm=a,e.reverse=!1}},{prepend:l(()=>[n(W,null,{default:l(()=>[g(m(a.icon),1)]),_:2},1024)]),default:l(()=>[n(G,null,{default:l(()=>[g(m(a.name),1)]),_:2},1024)]),_:2},1032,["variant","onClick"]))),128))]),_:1})]),_:1})):y("",!0),r.filteredFlags.length>1&&e.lastChosenAlgorithm&&!e.lastChosenAlgorithm.hideReverse?(u(),v(F,{key:1,bottom:""},{activator:l(({props:a})=>[n(k,V({icon:"mdi-sort-alphabetical-"+(e.reverse?"descending":"ascending"),class:"mt-4 ml-4"},a,{onClick:s[3]||(s[3]=h=>{e.reverse=!e.reverse,e.flags=e.flags.reverse()})}),null,16,["icon"])]),default:l(()=>[p("span",null,m(e.reverse?"Descending":"Ascending"),1)]),_:1})):y("",!0)]),_:1}),n(A,{cols:"12"},{default:l(()=>[r.filteredFlags.length>0?(u(),c("p",Z,[e.search?y("",!0):(u(),c("span",$,"Showing\xA0")),n(z,{"leave-absolute":""},{default:l(()=>[(u(),c("b",{key:r.filteredFlags.length},m(r.filteredFlags.length)+"\xA0",1))]),_:1}),p("span",null,m((r.filteredFlags.length==1?"flag":"flags")+(e.search?" found":""))+"\xA0 ",1),e.search?(u(),c("span",ee,"containing "+m(r.improvedSearch),1)):y("",!0)])):(u(),c("p",se,[g(" No flags matched your search."),te,r.suggestion?(u(),c("span",le,[g(" Did you mean: "),p("i",{onClick:s[4]||(s[4]=a=>e.search=r.suggestion),class:"text-primary"},m(r.suggestion),1)])):y("",!0)]))]),_:1}),(u(!0),c(_,null,L(e.flags,a=>J((u(),v(A,{key:a,cols:"12",sm:"6",lg:"4"},{default:l(()=>[n(f,{id:a,"always-show":""},{default:l(()=>[n(S,null,{default:l(()=>[n(K,{innerHTML:r.highlight(a,e.search)},null,8,["innerHTML"]),n(B,null,{default:l(()=>[n(d,{preset:a},null,8,["preset"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["id"])]),_:2},1024)),[[Q,r.test(a)]])),128)),r.filteredFlags.length===0?(u(),v(A,{key:0,cols:"12",sm:"6",lg:"4"},{default:l(()=>[n(S,{color:"error"},{default:l(()=>[n(B,null,{default:l(()=>[ae,p("p",re,[g(" You want to suggest or add a flag or label? Open an "),n(k,{href:"https://github.com/leo848/gayguessr/issues/new?assignees=&labels=flag-request&template=request-a-flag---label.md&title=Add%20"+e.search,target:"_blank",variant:"tonal",size:"large"},{default:l(()=>[g("issue")]),_:1},8,["href"]),g(" on "),n(k,{href:"https://github.com/leo848/gayguessr/",variant:"tonal"},{default:l(()=>[g("GitHub")]),_:1}),g(". ")])]),_:1})]),_:1})]),_:1})):y("",!0)]),_:1})]),_:1})}const ie=M(x,[["render",ne]]);export{ie as default};
